[ivr-1]
exten => s,1,Answer()
exten => s,2,Background(Telecom-welcome-message) 
exten => s,3, Waitexten(10)

exten => 1,1,Goto(AgentExternal,100,1)
exten => 2,1,Goto(AgentExternal,200,1)
exten => 3,1,Goto(AgentExternal,300,1)


;-------------------------------------------------------------
[incoming]
exten => 0777,1,Goto(ivr-1,s,1) 
;-------------------------------------------------------------
[AgentExternal]

exten => 100,1,Answer()
same  => n,Monitor(wav)
same  => n,Queue(ar,t,,,10)
same  => n,Goto(OutAR,1,1)
same  => n,StopMonitor()
same  => n,Hangup()






exten => 200,1,Answer()
same  => n,Monitor(wav)
same  => n,Queue(en,t,,,10)
same  => n,Goto(OutEN,2,1)
same  => n,StopMonitor()
same  => n,Hangup()


exten => 300,1,Answer()
same  => n,Monitor(wav)
same  => n,Queue(fr,t,,,10)
same  => n,Goto(OutFR,3,1)
same  => n,StopMonitor()
same  => n,Hangup()

exten => 400,1,Answer()
same  => n,Monitor(wav)
same  => n,Dial(SIP/CallCenterManager,10)
same  => n,StopMonitor()
same  => n,Hangup()

exten => 500,1,Answer()
same  => n,Monitor(wav)
same  => n,Dial(SIP/Tech_Sup,10)
same  => n,StopMonitor()
same  => n,Hangup()


;----------------------------------------
[Outar]
exten => 1,1,Playback(Please_enter_your_number)
exten => 1,n,Read(NUMBER,,4)
exten => 1,n,SayDigits(${NUMBER})
exten => 1,n,Wait(1)
exten => 1,n,Playback(toConfirm_toReenter)
exten => 1,n,Read(Confirm,,1)
exten => 1,n,GoToIf($[${Confirm} = 1]?alt:1)
exten => 1,n(alt),Playback(Please_enter_your_alternative_number)
exten => 1,n,Read(altN,,4)
exten => 1,n,SayDigits(${altN})
exten => 1,n,Wait(1)
exten => 1,n(altConfirm),Playback(toConfirm_toReenter)
exten => 1,n,Read(Confirm1,,1)
exten => 1,n,GoToIf($[${Confirm1} = 1]?full:altConfirm)
exten => 1,n(empty),Goto(Out,1,1)
exten => 1,n,Hangup()
exten => 1,n(full),System(/bin/echo  ${STRFTIME(${EPOCH},GMT-2,%C%y/%m/%d - %H:%M)}  ${NUMBER}  ${altN}  ${CALLERID(num)} queueAR >> /home/shamel/Desktop/Q1.txt)
exten => 1,n,Hangup()

[outEN]
exten => 2,1,Playback(Please_enter_your_number)
exten => 2,n,Read(NUMBER,,4)
exten => 2,n,SayDigits(${NUMBER})
exten => 2,n,Wait(1)
exten => 2,n,Playback(toConfirm_toReenter)
exten => 2,n,Read(Confirm,,1)
exten => 2,n,GoToIf($[${Confirm} = 1]?alt:1)
exten => 2,n(alt),Playback(Please_enter_your_alternative_number)
exten => 2,n,Read(altN,,4)
exten => 2,n,SayDigits(${altN})
exten => 2,n,Wait(1)
exten => 2,n(altConfirm),Playback(toConfirm_toReenter)
exten => 2,n,Read(Confirm1,,1)
exten => 2,n,GoToIf($[${Confirm1} = 1]?full:altConfirm)
exten => 2,n(empty),Goto(Out,1,1)
exten => 2,n,Hangup()
exten => 2,n(full),System(/bin/echo  ${STRFTIME(${EPOCH},GMT-2,%C%y/%m/%d - %H:%M)}  ${NUMBER}  ${altN}  ${CALLERID(num)} queueAR >> /home/shamel/Desktop/Q2.txt)
exten => 2,n,Hangup()

exten => 3,1,Playback(Please_enter_your_number)
exten => 3,n,Read(NUMBER,,4)
exten => 3,n,SayDigits(${NUMBER})
exten => 3,n,Wait(1)
exten => 3,n,Playback(toConfirm_toReenter)
exten => 3,n,Read(Confirm,,1)
exten => 3,n,GoToIf($[${Confirm} = 1]?alt:1)
exten => 3,n(alt),Playback(Please_enter_your_alternative_number)
exten => 3,n,Read(altN,,4)
exten => 3,n,SayDigits(${altN})
exten => 3,n,Wait(1)
exten => 3,n(altConfirm),Playback(toConfirm_toReenter)
exten => 3,n,Read(Confirm1,,1)
exten => 3,n,GoToIf($[${Confirm1} = 1]?full:altConfirm)
exten => 3,n(empty),Goto(Out,1,1)
exten => 3,n,Hangup()
exten => 3,n(full),System(/bin/echo  ${STRFTIME(${EPOCH},GMT-2,%C%y/%m/%d - %H:%M)}  ${NUMBER}  ${altN}  ${CALLERID(num)} queueAR >> /home/shamel/Desktop/Q3.txt)
exten => 3,n,Hangup()



[Agent]

exten => 100,1,Dial(SIP/Agent1ar,10,W)
same  => n,VoiceMail(100@VoiceMail)
same  => n,Hangup()

exten => 101,1,Dial(SIP/Agent2ar,10,W)
same  => n,VoiceMail(101@VoiceMail)
same  => n,Hangup()

exten => 102,1,Dial(SIP/Agent3ar,10,W)
same  => n,VoiceMail(102@VoiceMail)
same  => n,Hangup()

exten => 200,1,Dial(SIP/Agent1en,10,W)
same  => n,VoiceMail(200@VoiceMail)
same  => n,Hangup()

exten => 201,1,Dial(SIP/Agent2en,10,W)
same  => n,VoiceMail(201@VoiceMail)
same  => n,Hangup()

exten => 202,1,Dial(SIP/Agent3en,10,W)
same  => n,VoiceMail(202@VoiceMail)
same  => n,Hangup()

exten => 300,1,Dial(SIP/Agent1fr,10,W)
same  => n,VoiceMail(300@VoiceMail)
same  => n,Hangup()

exten => 301,1,Dial(SIP/Agent2fr,10,W)
same  => n,VoiceMail(301@VoiceMail)
same  => n,Hangup()

exten => 302,1,Dial(SIP/Agent3fr,10,W)
same  => n,VoiceMail(302@VoiceMail)
same  => n,Hangup()

exten => 400,1,Dial(SIP/CallCenterManager,10,W)
same  => n,VoiceMail(400@VoiceMail)
same  => n,Hangup()

exten => 500,1,Dial(SIP/Tech-Sup,10,W)
same  => n,VoiceMail(500@VoiceMail)
same  => n,Hangup()


;-------------Customers DataBase-------------------------;

exten => 1234,1,Dial(SIP/outside)
same  => n,Hangup()

exten => 4567,1,Dial(SIP/outside1)
same  => n,Hangup()
;-------------------------------------------------------------
[CEO]


exten => 100,1,Dial(SIP/Agent1ar,10,W)
same  => n,VoiceMail(100@VoiceMail)
same  => n,Hangup()

exten => 101,1,Dial(SIP/Agent2ar,10,W)
same  => n,VoiceMail(101@VoiceMail)
same  => n,Hangup()

exten => 102,1,Dial(SIP/Agent3ar,10,W)
same  => n,VoiceMail(102@VoiceMail)
same  => n,Hangup()

exten => 200,1,Dial(SIP/Agent1en,10,W)
same  => n,VoiceMail(200@VoiceMail)
same  => n,Hangup()

exten => 201,1,Dial(SIP/Agent2en,10,W)
same  => n,VoiceMail(201@VoiceMail)
same  => n,Hangup()

exten => 202,1,Dial(SIP/Agent3en,10,W)
same  => n,VoiceMail(202@VoiceMail)
same  => n,Hangup()

exten => 300,1,Dial(SIP/Agent1fr,10,W)
same  => n,VoiceMail(300@VoiceMail)
same  => n,Hangup()

exten => 301,1,Dial(SIP/Agent2fr,10,W)
same  => n,VoiceMail(301@VoiceMail)
same  => n,Hangup()

exten => 302,1,Dial(SIP/Agent3fr,10,W)
same  => n,VoiceMail(302@VoiceMail)
same  => n,Hangup()

exten => 400,1,Dial(SIP/CallCenterManager,10,W)
same  => n,VoiceMail(400@VoiceMail)
same  => n,Hangup()

exten => 401,1,Dial(SIP/Sales,10,W)
same  => n,VoiceMail(401@VoiceMail)
same  => n,Hangup()


exten => 500,1,Dial(SIP/Tech-Sup,10,W)
same  => n,VoiceMail(500@VoiceMail)
same  => n,Hangup()

exten => 2000,1,VoiceMailMain(@VoiceMail)
;--------------------------------------------------------------
[Tech-Sup] ;500
exten => 100,1,Dial(SIP/Agent1ar,10,W)
same  => n,VoiceMail(100@VoiceMail)
same  => n,Hangup()

exten => 101,1,Dial(SIP/Agent2ar,10,W)
same  => n,VoiceMail(101@VoiceMail)
same  => n,Hangup()

exten => 102,1,Dial(SIP/Agent3ar,10,W)
same  => n,VoiceMail(102@VoiceMail)
same  => n,Hangup()

exten => 200,1,Dial(SIP/Agent1en,10,W)
same  => n,VoiceMail(200@VoiceMail)
same  => n,Hangup()

exten => 201,1,Dial(SIP/Agent2en,10,W)
same  => n,VoiceMail(201@VoiceMail)
same  => n,Hangup()

exten => 202,1,Dial(SIP/Agent3en,10,W)
same  => n,VoiceMail(202@VoiceMail)
same  => n,Hangup()

exten => 300,1,Dial(SIP/Agent1fr,10,W)
same  => n,VoiceMail(300@VoiceMail)
same  => n,Hangup()

exten => 301,1,Dial(SIP/Agent2fr,10,W)
same  => n,VoiceMail(301@VoiceMail)
same  => n,Hangup()

exten => 302,1,Dial(SIP/Agent3fr,10,W)
same  => n,VoiceMail(302@VoiceMail)
same  => n,Hangup()


exten => 400,1,Dial(SIP/CallCenterManager,10,W)
same  => n,VoiceMail(400@VoiceMail)
same  => n,Hangup()

exten => 2000,1,VoiceMailMain(@VoiceMail)
;--------------------------------------------------------------
[Manager] ;400,401
exten => 100,1,Dial(SIP/Agent1ar,10,W)
same  => n,VoiceMail(100@VoiceMail)
same  => n,Hangup()

exten => 101,1,Dial(SIP/Agent2ar,10,W)
same  => n,VoiceMail(101@VoiceMail)
same  => n,Hangup()

exten => 102,1,Dial(SIP/Agent3ar,10,W)
same  => n,VoiceMail(102@VoiceMail)
same  => n,Hangup()

exten => 200,1,Dial(SIP/Agent1en,10,W)
same  => n,VoiceMail(200@VoiceMail)
same  => n,Hangup()

exten => 201,1,Dial(SIP/Agent2en,10,W)
same  => n,VoiceMail(201@VoiceMail)
same  => n,Hangup()

exten => 202,1,Dial(SIP/Agent3en,10,W)
same  => n,VoiceMail(202@VoiceMail)
same  => n,Hangup()

exten => 300,1,Dial(SIP/Agent1fr,10,W)
same  => n,VoiceMail(300@VoiceMail)
same  => n,Hangup()

exten => 301,1,Dial(SIP/Agent2fr,10,W)
same  => n,VoiceMail(301@VoiceMail)
same  => n,Hangup()

exten => 302,1,Dial(SIP/Agent3fr,10,W)
same  => n,VoiceMail(302@VoiceMail)
same  => n,Hangup()


exten => 400,1,Dial(SIP/CallCenterManager,10,W)
same  => n,VoiceMail(400@VoiceMail)
same  => n,Hangup()

exten => 401,1,Dial(SIP/Sales,10,W)
same  => n,VoiceMail(401@VoiceMail)
same  => n,Hangup()

exten => 500,1,Dial(SIP/Tech-Sup,10,W)
same  => n,VoiceMail(500@VoiceMail)
same  => n,Hangup()

exten => 1000,1,Dial(SIP/CEO,10,W)
same  => n,VoiceMail(1000@VoiceMail)
same  => n,Hangup()

exten => 2000,1,VoiceMailMain(@VoiceMail)

